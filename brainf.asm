program:
	.start 0x2BC
	LD LOC NUM 512 1
	LD LOC NUM 513 5
	LD LOC NUM 514 8
	LD LOC NUM 515 7
	LD LOC NUM 516 6
	LD LOC NUM 517 0
	LD LOC NUM 518 0
	LD LOC NUM 519 0
	
	NOP
	SSK _kernel
	LD LOC NUM 640 0
	LD LOC NUM 641 0
	LD LOC NUM 646 0
	$mainloop
	LD LOC NUM 642 512
	ADD LOC LOC 642 641
	LD LOC PLOC 647 642
	
	CMP LOC NUM 647 1
	BR NE G 0 NUM _ceq2
		LD LOC PLOC 642 640
		ADD LOC NUM 642 1
		CMP LOC NUM 642 255
		BR LE G 0 NUM _ceq1m1
			LD LOC NUM 642 0
		$ceq1m1
		LD PLOC LOC 640 642
		ADD LOC NUM 641 1
	BR NC G 0 NUM _ceqe
	$ceq2
	CMP LOC NUM 647 2
	BR NE G 0 NUM _ceq3
		LD LOC PLOC 642 640
		ADD LOC NUM 642 -1
		CMP LOC NUM 642 0
		BR GE G 0 NUM _ceq2m1
			LD LOC NUM 642 255
		$ceq2m1
		LD PLOC LOC 640 642
		ADD LOC NUM 641 1
	BR NC G 0 NUM _ceqe
	$ceq3
	CMP LOC NUM 647 3
	BR NE G 0 NUM _ceq4
		LD LOC LOC 642 640
		CMP LOC NUM 642 0
		BR LE G 0 NUM _ceq3m1
			SUB LOC NUM 640 1
		$ceq3m1
		ADD LOC NUM 641 1
	BR NC G 0 NUM _ceqe
	$ceq4
	CMP LOC NUM 647 4
	BR NE G 0 NUM _ceq5
		LD LOC LOC 642 640
		CMP LOC NUM 642 511
		BR LE G 0 NUM _ceq4m1
			HALT
		$ceq4m1
		ADD LOC NUM 640 1
		ADD LOC NUM 641 1
	BR NC G 0 NUM _ceqe
	$ceq5
	CMP LOC NUM 647 5
	BR NE G 0 NUM _ceq6
		ESC
		LD LOC PLOC 645 640
		CMP LOC NUM 645 0
		BR LE G 0 NUM _5i1el
			ADD LOC NUM 641 1
		BR NC G 0 NUM _5i1e
		$5i1el
			LD LOC NUM 642 512
			ADD LOC LOC 642 641
			LD LOC NUM 643 0
			$5loops
				LD LOC PLOC 645 642
				CMP LOC NUM 645 5
				BR NE G 0 NUM _5i2el
					ADD LOC NUM 643 1
				BR NC G 0 NUM _5i2e
				$5i2el
				CMP LOC NUM 645 6
				BR NE G 0 NUM _5i2e
					SUB LOC NUM 643 1
				$5i2e
				ADD LOC NUM 642 1
				CMP LOC NUM 643 0
				BR NE G 0 NUM _5loops
					LD LOC LOC 641 642
					SUB LOC NUM 641 512
			$5loope
		$5i1e
	BR NC G 0 NUM _ceqe
	$ceq6
	CMP LOC NUM 647 6
	BR NE G 0 NUM _ceq7
		ESC
		LD LOC PLOC 645 640
		CMP LOC NUM 645 0
		BR NE G 0 NUM _6i1el
			ADD LOC NUM 641 1
		BR NC G 0 NUM _6i1e
		$6i1el
			LD LOC NUM 642 512
			ADD LOC LOC 642 641
			LD LOC NUM 643 0
			$6loops
				LD LOC PLOC 645 642
				CMP LOC NUM 645 5
				BR NE G 0 NUM _6i2el
					SUB LOC NUM 643 1
				BR NC G 0 NUM _6i2e
				$6i2el
				CMP LOC NUM 645 6
				BR NE G 0 NUM _6i2e
					ADD LOC NUM 643 1
				$6i2e
				CMP LOC NUM 643 0
				BR NE G 0 NUM _6loopsp
					LD LOC LOC 641 642
					SUB LOC NUM 641 512
				BR NC G 0 NUM _6loope
				$6loopsp
				SUB LOC NUM 642 1
				BR NC G 0 NUM _6loops
			$6loope
		$6i1e
	BR NC G 0 NUM _ceqe
	$ceq7
	CMP LOC NUM 647 7
	BR NE G 0 NUM _ceq8
		LD LOC LOC 642 646
		ADD LOC LOC 642 646
		ADD LOC LOC 642 646
		LD LOC LOC 643 642
		ADD LOC NUM 643 2
		SETVT LOC LOC PLOC NUM 642 643 640 1
		RLV
		ADD LOC NUM 646 1
		ESC
		ADD LOC NUM 641 1
	BR NC G 0 NUM _ceqe
	$ceq8
	CMP LOC NUM 647 8
	BR NE G 0 NUM _ceqel
		ESC
		SYSCALL
		CMP LOC NUM 0xFFFE 1
		BR NE G 0 NUM _8bac
			LD PLOC LOC 640 0xFFFF
			ADD LOC NUM 641 1
		$8bac
	BR NC G 0 NUM _ceqe
	$ceqel
	ADD LOC NUM 641 1
	$ceqe
	CMP LOC NUM 641 127
	BR LE G 0 NUM _mainloop
		NOP
		HALT
data:
	.start 0x600
	$kernel
	RCD 1 0xFFFE
	CIRQ 0xFFFD
	CMP LOC NUM 0xFFFD 1
	BR NE G 0 NUM _k1
	LIRQ 0xFFFD
	CMP LOC NUM 0xFFFD 0
	BR NE G 0 NUM _ksw0
	RCD 0 0xFFFF
	BR NC G 0 NUM _k1
	$ksw0
	CMP LOC NUM 0xFFFD 1
	BR NE G 0 NUM _ksw1
	HALT
	BR NC G 0 NUM _k1
	$ksw1
	$k1
	BR NC G 0 REG RSYSRET